# –ú–∏–≥—Ä–∞—Ü–∏—è –≤ monorepo

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
shiki-extender/
‚îú‚îÄ‚îÄ Chrome_extension/
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ package.json
‚îÇ       ‚îú‚îÄ‚îÄ webpack.config.js
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ NodeServer/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ shiki_ex_server.js
‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îî‚îÄ‚îÄ scripts/
```

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (monorepo)
```
shiki-extender/
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ extension/          # Chrome_extension ‚Üí packages/extension
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/           # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dist/          # –°–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package.json   # @shiki-extender/extension
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webpack.config.js
‚îÇ   ‚îî‚îÄ‚îÄ server/            # NodeServer ‚Üí packages/server
‚îÇ       ‚îú‚îÄ‚îÄ config/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ modules/       # API –º–æ–¥—É–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ package.json   # @shiki-extender/server
‚îÇ       ‚îî‚îÄ‚îÄ shiki_ex_server.js
‚îú‚îÄ‚îÄ scripts/               # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ docs/                  # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ package.json          # npm workspaces
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### ‚úÖ npm workspaces
- –ï–¥–∏–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏

### ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ frontend –∏ backend
- –õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### ‚úÖ –£–¥–æ–±–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ü—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥–∞—Ö

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–°—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –°–µ—Ä–≤–µ—Ä
cd NodeServer
npm install

# –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
cd Chrome_extension/src
npm install
```

**–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –í—Å–µ –ø–∞–∫–µ—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
npm install
```

### –ó–∞–ø—É—Å–∫ –∏ —Å–±–æ—Ä–∫–∞

**–°—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –°–µ—Ä–≤–µ—Ä
cd NodeServer
npm start

# –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
cd Chrome_extension/src
npm run build
```

**–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
npm run start:server
npm run build:extension

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
cd packages/server && npm start
cd packages/extension && npm run build
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

**–°—Ç–∞—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ package.json
# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ manifest.json
```

**–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
node scripts/bump-version.js 1.0.1
node scripts/create-release.js 1.0.1
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—É—Ç—è—Ö

### –ü—É—Ç–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ä—ã–µ –ø—É—Ç–∏:**
```javascript
// altWatcher.js
require('../../config/db_config')
```

**–ù–æ–≤—ã–µ –ø—É—Ç–∏:**
```javascript
// altWatcher.js
require('../config/db_config')
```

### –ü—É—Ç–∏ –≤ webpack

**–°—Ç–∞—Ä–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```javascript
// webpack.config.js
entry: {
  'js/main': path.join(__dirname, 'options', 'options.js'),
}
output: {
  path: path.resolve('../dist')
}
```

**–ù–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```javascript
// webpack.config.js
entry: {
  'js/main': path.join(__dirname, 'src', 'options', 'options.js'),
}
output: {
  path: path.resolve(__dirname, 'dist')
}
```

### –ü—É—Ç–∏ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö

**–°—Ç–∞—Ä—ã–µ –ø—É—Ç–∏:**
```javascript
// scripts/bump-version.js
const srcDir = path.join(__dirname, '..', 'Chrome_extension', 'src');
const manifestPath = path.join(srcDir, 'manifest.json');
```

**–ù–æ–≤—ã–µ –ø—É—Ç–∏:**
```javascript
// scripts/bump-version.js
const extensionDir = path.join(__dirname, '..', 'packages', 'extension');
const manifestPath = path.join(extensionDir, 'src', 'manifest.json');
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- API endpoints –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ –∂–µ
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
- Manifest.json –æ—Å—Ç–∞–ª—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º

### –ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è
- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –ø—É—Ç–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
- IDE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp -r shiki-extender shiki-extender-backup
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Git
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ò–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ monorepo –≤–µ—Ç–∫—É
git checkout monorepo
git pull origin monorepo
```

### 3. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf Chrome_extension/src/node_modules
rm -rf NodeServer/node_modules
rm -rf node_modules

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ë–î
cp packages/server/config/db_config.js.example packages/server/config/db_config.js
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run start:server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
npm run build:extension
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞: "workspaces not supported"
```bash
# –û–±–Ω–æ–≤–∏—Ç—å Node.js –∏ npm
node --version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 14
npm --version   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 7

# –û–±–Ω–æ–≤–∏—Ç—å npm
npm install -g npm@latest
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot find module"
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Path not found"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
ls -la packages/
ls -la packages/extension/
ls -la packages/server/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat packages/server/config/db_config.js
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Webpack build fails"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç–∏ –≤ webpack.config.js
cd packages/extension
cat webpack.config.js

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ extension
npm install
npm run build
```

## –û—Ç–∫–∞—Ç –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è:

### 1. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ç–∫–µ
```bash
git checkout previous-version
# –∏–ª–∏
git checkout <commit-hash>
```

### 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd Chrome_extension/src
npm install

cd ../../NodeServer
npm install
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Å—Ç–∞—Ä–æ–º —Ä–µ–∂–∏–º–µ
```bash
# –°–µ—Ä–≤–µ—Ä
cd NodeServer
npm start

# –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
cd Chrome_extension/src
npm run build
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ï–¥–∏–Ω—ã–π —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

### ‚úÖ –õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ø—Ä–æ–µ–∫—Ç—É

### ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫
- npm workspaces
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚úÖ –£–¥–æ–±–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏
- –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [FAQ](FAQ.md)
2. –ò–∑—É—á–∏—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](INSTALL.md)
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –≥—Ä—É–ø–ø—É –í–ö: https://vk.com/shiki_ex

---

**–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É monorepo!** üéâ
