# Устранение npm уязвимостей (npm audit, pg, semver)

В этом списке отражены шаги по выявлению и устранению npm-уязвимостей в проекте (2025-07-17).

## Completed Tasks

- [x] Проведён npm audit в корне проекта и в packages/extension
- [x] Удалён неиспользуемый пакет bootstrap-vue
- [x] Обновлён пакет semver до последней версии
- [x] Обнаружено, что уязвимость semver приходит транзитивно через pg
- [x] Проанализировано использование pg в серверном коде (Node.js)
- [x] Обновлён пакет pg до последней версии (8.x)
- [x] Проверено отсутствие уязвимостей после обновления (npm audit)

## In Progress Tasks

- [ ] Протестировать работу сервера после обновления pg (npm run start:server)
- [ ] Проверить работу основных API-запросов (GET/POST /altWatcher/link)
- [ ] Проверить параметры dbConfig на совместимость с новой версией pg

## Future Tasks

- [ ] Следить за появлением новых npm уязвимостей (регулярно запускать npm audit)
- [ ] Автоматизировать аудит и обновление зависимостей через CI/CD
- [ ] Добавить тесты для критичных API после обновлений зависимостей

## Implementation Plan

1. Провести npm audit во всех пакетах проекта.
2. Удалить неиспользуемые и уязвимые зависимости (например, bootstrap-vue).
3. Обновить прямые зависимости (semver, pg) до последних безопасных версий.
4. Проверить транзитивные зависимости (npm ls <package>).
5. Проанализировать, как используются обновляемые пакеты в коде (grep, code review).
6. Обновить пакет (например, pg) и проверить совместимость кода.
7. Запустить сервер и убедиться в отсутствии ошибок.
8. Проверить работу основных API.
9. Зафиксировать результат (отсутствие уязвимостей, работоспособность).

### Relevant Files

- packages/server/package.json — зависимости сервера (pg, semver)
- packages/server/modules/altWatcher/altWatcher.js — использование Pool из pg
- packages/server/config/db_config.js — параметры подключения к БД
- package-lock.json — фиксация версий зависимостей 